# 要件定義: UIコンポーネント化最適化調査

## Meta
- Workflow ID: wf-20260222-002
- Mode: existing-modification
- Created: 2026-02-22
- Phase: 1 完了

---

## 背景・目的

Claude Codeが新規実装時に独自のUIを設計してしまい、既存コンポーネントを活用できていない問題がある。
これにより、重複したUIコードが増加し、保守性・一貫性が低下している。

**解決したいこと:**
- Claude Codeが新規設計の際に既存コンポーネントを確認し、使用可能な箇所では必ず使用するよう誘導する

---

## 成功条件（KPI）

- [ ] 全コンポーネントの現状が把握できている（重複・散在・共通化漏れが特定できる）
- [ ] コンポーネントを視覚的に確認できるツール（Storybook等）が動作している、またはカタログが整備されている
- [ ] Claude Codeが実装時に既存コンポーネントを参照しやすい仕組みが存在する

---

## ユースケース

| アクター | アクション | 目的 |
|---------|----------|------|
| Claude Code | 新規UI実装前に既存コンポーネントを確認する | 重複実装を防ぐ |
| 開発者 | コンポーネント一覧を参照する | 利用可能なUIパーツを把握する |
| Claude Code | Storybookやカタログを参照して適切なコンポーネントを選択 | 一貫したUI実装を行う |

---

## MVP境界

### やること
1. **現状調査**: 全コンポーネントの棚卸し（重複・散在・共通化漏れの特定）
2. **ツール導入**: コンポーネント視覚確認ツール（Storybook）の導入検討・実装
3. **カタログ整備**: Claude Codeが参照しやすいコンポーネントカタログ（ドキュメント）の整備

### やらないこと
- コンポーネント自体のリファクタリング（まず現状把握）
- デザインシステムの全面刷新
- テストの追加（調査・ツール導入フェーズでは不要）

---

## 受け入れ条件（Acceptance Criteria）

- [ ] AC1: 全コンポーネントが一覧化され、使用箇所・props・説明が明記されている
- [ ] AC2: Storybook（または代替ツール）が `npm run storybook` 等で起動できる
- [ ] AC3: Claude Codeが実装時に参照できるコンポーネントカタログ（CLAUDE.mdまたはdocs/）が存在する
- [ ] AC4: 重複・共通化漏れのコンポーネントが特定されリスト化されている

---

## 非機能要件

| 種別 | 要件 |
|------|------|
| 開発体験 | Storybookが既存の開発フローに自然に組み込まれる |
| パフォーマンス | Storybook起動に影響なし（本番ビルドには含めない） |
| 保守性 | コンポーネント追加時にカタログを更新しやすい仕組み |

---

## 制約

- Next.js 14（App Router）+ TypeScript + Tailwind CSS の技術スタック
- Firebase Hosting（静的エクスポート）のため、SSRは使用不可
- 既存コンポーネントの動作を変更しない
