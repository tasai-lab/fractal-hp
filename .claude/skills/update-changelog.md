---
name: update-changelog
description: プッシュ前に更新情報ページ(src/app/updates/page.tsx)を最新に保つ。コミット後、プッシュ前に必ず実行する。
---

# 更新情報自動更新スキル

## 目的

このスキルは、サイト更新をプッシュする前に `src/app/updates/page.tsx` の更新情報を最新に保つためのものです。

## 実行タイミング

**必須**: `git push` を実行する前に必ずこのスキルを実行してください。

## 手順

### 1. 直近のコミット履歴を確認

```bash
git log --oneline -10
```

### 2. 現在の更新情報を確認

`src/app/updates/page.tsx` の `updates` 配列を読み取り、最新の日付を確認する。

### 3. 今日の日付で新しい更新があるか判定

以下の条件をチェック:
- 今日の日付のエントリが既に存在するか
- 直近のコミットに反映されていない変更があるか

### 4. 更新情報の追加

新しい変更がある場合、以下の形式で追加:

```typescript
{
  date: "YYYY-MM-DD",  // 今日の日付
  items: [
    { type: "new", title: "新規ページ名", link: "/path" },      // 新規ページ
    { type: "improve", title: "改善内容", link: "/path" },      // 改善・リニューアル
    { type: "improve", title: "内部改善（リンクなし）" },        // 内部改善
  ],
}
```

### 5. タイプの判定基準

| コミットメッセージ | type | 説明 |
|------------------|------|------|
| `feat:` + 新規ページ | `new` | 新しいページの追加 |
| `feat:` + 機能追加 | `improve` | 既存ページへの機能追加 |
| `fix:` | `improve` | バグ修正 |
| `refactor:` | 記載不要 | ユーザーに見えない変更 |
| `style:` | `improve` | デザイン改善 |
| `docs:` | 記載不要 | ドキュメント変更 |
| `chore:` | 記載不要 | 内部作業 |

### 6. ユーザーに見せる変更のみ記載

以下は更新情報に**記載しない**:
- 内部リファクタリング
- コード整理
- 依存関係の更新
- テストの追加
- 開発環境の設定変更

### 7. 変更があった場合

1. `src/app/updates/page.tsx` を編集
2. 変更をコミットに含める
3. プッシュを続行

## 出力例

```
## 更新情報チェック結果

### 直近のコミット
- feat(recruit): 看護師・リハビリ職ページを採用情報に統合
- fix(ui): ボタンの色を修正

### 更新情報への追加
- [improve] 採用ページに職種タブを追加し統合 → /recruit#positions

### アクション
更新情報ページを更新しました。プッシュを続行してください。
```

## 自動実行の設定

CLAUDE.mdに以下を追加済み:
> プッシュ前には必ず `/update-changelog` スキルを実行すること
